{% extends "base.html" %} {% block content %}
<video id="camera" autoplay playsinline></video>

<canvas id="mask"></canvas>
<canvas id="overlay"></canvas>

<div id="overlay-content">
  
  <div id="metadata-display">
    {% if country_code %}
    <div id="country-name-display">
      <h2>{{ country_name or country_code }}</h2>
    </div>
  {% endif %}
    <div id="metadata-content"></div>
  </div>

  {% if country_code %}
  <div id="decades-nav">
    <div>
      <button
        onclick="location.href='{{ url_for('navigate_decades', direction='prev') }}'"
      >
        ←
      </button>
      <span id="current-decade">{{ selected_decade or 'Select Decade' }}</span>
      <button
        onclick="location.href='{{ url_for('navigate_decades', direction='next') }}'"
      >
        →
      </button>
    </div>
<button id="playMusicButton" onclick="playMusic()" style="display: none;">Play Music</button>
  </div>
  {% endif %}
</div>

<audio id="music-player" controls></audio>

<script>
  const x = {{ x|tojson }};
  const y = {{ y|tojson }};
  const diameter = {{ diameter|tojson }};
</script>

<script src="{{ url_for('static', filename='js/circular_ui.js') }}"></script>
<script>
  const musicPlayer = document.getElementById('music-player');

  document.addEventListener('keydown', function (e) {
    if (e.code === 'Numpad4') {
      // Skip backward (e.g., go back 10 seconds)
      musicPlayer.currentTime = Math.max(0, musicPlayer.currentTime - 10);
    } else if (e.code === 'Numpad5') {
      // Play/Pause toggle
      if (musicPlayer.paused) {
        musicPlayer.play();
      } else {
        musicPlayer.pause();
      }
    } else if (e.code === 'Numpad6') {
      // Skip forward (e.g., jump ahead 10 seconds)
      musicPlayer.currentTime = Math.min(musicPlayer.duration, musicPlayer.currentTime + 10);
    }
  });
</script>



{% endblock %}
