{% extends "base.html" %}

{% block content %}
<video id="camera" autoplay playsinline></video>

<!-- Mask canvas -->
<canvas id="mask" style="position:absolute; top:0; left:0;"></canvas>

<!-- Overlay canvas -->
<canvas id="overlay" style="position:absolute; top:0; left:0;"></canvas>

<!-- Overlay content inside circular mask -->
<div id="overlay-content" style="position:absolute; top:0; left:0; width:100%; height:100%; pointer-events:none; z-index:10;">
  <!-- Metadata display -->
  <div id="metadata-display" style="position:absolute; top:50%; left:50%; transform:translate(-50%, -50%);color:rgba(0, 255, 170, .8);  text-align:center; font-size:22px;">
    <div id="metadata-content">
      <div></div>
    </div>
  </div>
  

  <!-- Decade navigation -->
  {% if country_code %}
  <div id="decades-nav" style="position:absolute; bottom:50px; width:100%; text-align:center; color:white;">
    <div>
      <button onclick="location.href='{{ url_for('navigate_decades', direction='prev') }}'" style="pointer-events:auto;">←</button>
      <span id="current-decade">{{ selected_decade or 'Select Decade' }}</span>
      <button onclick="location.href='{{ url_for('navigate_decades', direction='next') }}'" style="pointer-events:auto;">→</button>
    </div>
    <button onclick="playMusic()" style="pointer-events:auto; margin-top:10px;">Play Music</button>
  </div>
  {% endif %}
</div>

<!-- Hidden audio element -->
<audio id="music-player" style="display:none;" controls></audio>

<!-- Pass variables to JS -->
<script>
const x = {{ x|tojson }};
const y = {{ y|tojson }};
const diameter = {{ diameter|tojson }};
</script>

<script src="{{ url_for('static', filename='js/circular_ui.js') }}"></script>
  
  
{% endblock %}
